import"./DsnmJJEf.js";import{au as Ee,av as ye,aw as We,a5 as Ie,P as Ne,H as ze,ax as pe,N as oe,x as G,ap as Je,I as Qe,i as d,y as Xe,K as Ze,L as je,M as Se,O as ce,X as ae,aj as $e,ay as ea,Q as be,T as aa,az as ue,aA as se,R as J,aB as we,$ as ta,aC as Ae,aD as Le,aE as Oe,V as Ce,W as ra,aF as na,aG as fe,q as la,aH as Re,aI as ia,ak as ua,aJ as sa,aK as va,aL as oa,e as ca,Y as fa,aM as da,aN as _a,aO as ha,aP as ba,aQ as ma,aR as ga,aS as xa,aT as Ea,u as ya,r as Sa,aU as wa,d as Z,p as K,s as ie,a as j,f as T,b as Y,t as N,g as y,h as W,c as w,k as S,j as X,l as V,n as te,m as re,v as ne,aq as Aa,aV as ke}from"./B0_GDqvu.js";import{p as C,i as H,b as Q}from"./D95gXjRn.js";let Me=!1;function He(){Me||(Me=!0,document.addEventListener("reset",a=>{Promise.resolve().then(()=>{if(!a.defaultPrevented)for(const e of a.target.elements)e.__on_r?.()})},{capture:!0}))}function ka(a){var e=We,t=Ie;Ee(null),ye(null);try{return a()}finally{Ee(e),ye(t)}}function qe(a,e,t,n=t){a.addEventListener(e,()=>ka(t));const l=a.__on_r;l?a.__on_r=()=>{l(),n(!0)}:a.__on_r=()=>n(!0),He()}function vt(a,e){return e}function Ma(a,e,t){for(var n=a.items,l=[],i=e.length,s=0;s<i;s++)sa(e[s].e,l,!0);var o=i>0&&l.length===0&&t!==null;if(o){var v=t.parentNode;va(v),v.append(t),n.clear(),P(a,e[0].prev,e[i-1].next)}oa(l,()=>{for(var u=0;u<i;u++){var r=e[u];o||(n.delete(r.k),P(a,r.prev,r.next)),Re(r.e,!o)}})}function ve(a,e,t,n,l,i=null){var s=a,o={flags:e,items:new Map,first:null},v=(e&pe)!==0;if(v){var u=a;s=G?oe(Je(u)):u.appendChild(Ne())}G&&Qe();var r=null,f=!1,m=new Map,I=Xe(()=>{var x=t();return Oe(x)?x:x==null?[]:Le(x)}),_,g;function h(){Ta(g,_,o,m,s,l,e,n,t),i!==null&&(_.length===0?r?Ce(r):r=be(()=>i(s)):r!==null&&ra(r,()=>{r=null}))}ze(()=>{g??=Ie,_=d(I);var x=_.length;if(f&&x===0)return;f=x===0;let k=!1;if(G){var p=Ze(s)===je;p!==(x===0)&&(s=Se(),oe(s),ce(!1),k=!0)}if(G){for(var M=null,E,c=0;c<x;c++){if(ae.nodeType===$e&&ae.data===ea){s=ae,k=!0,ce(!1);break}var b=_[c],A=n(b,c);E=me(ae,o,M,null,b,A,c,l,e,t),o.items.set(A,E),M=E}x>0&&oe(Se())}if(G)x===0&&i&&(r=be(()=>i(s)));else if(aa()){var L=new Set,U=J;for(c=0;c<x;c+=1){b=_[c],A=n(b,c);var R=o.items.get(A)??m.get(A);R?(e&(ue|se))!==0&&De(R,b,c,e):(E=me(null,o,null,null,b,A,c,l,e,t,!0),m.set(A,E)),L.add(A)}for(const[O,z]of o.items)L.has(O)||U.skipped_effects.add(z.e);U.add_callback(h)}else h();k&&ce(!0),d(I)}),G&&(s=ae)}function Ta(a,e,t,n,l,i,s,o,v){var u=(s&ia)!==0,r=(s&(ue|se))!==0,f=e.length,m=t.items,I=t.first,_=I,g,h=null,x,k=[],p=[],M,E,c,b;if(u)for(b=0;b<f;b+=1)M=e[b],E=o(M,b),c=m.get(E),c!==void 0&&(c.a?.measure(),(x??=new Set).add(c));for(b=0;b<f;b+=1){if(M=e[b],E=o(M,b),c=m.get(E),c===void 0){var A=n.get(E);if(A!==void 0){n.delete(E),m.set(E,A);var L=h?h.next:_;P(t,h,A),P(t,A,L),de(A,L,l),h=A}else{var U=_?_.e.nodes_start:l;h=me(U,t,h,h===null?t.first:h.next,M,E,b,i,s,v)}m.set(E,h),k=[],p=[],_=h.next;continue}if(r&&De(c,M,b,s),(c.e.f&fe)!==0&&(Ce(c.e),u&&(c.a?.unfix(),(x??=new Set).delete(c))),c!==_){if(g!==void 0&&g.has(c)){if(k.length<p.length){var R=p[0],O;h=R.prev;var z=k[0],q=k[k.length-1];for(O=0;O<k.length;O+=1)de(k[O],R,l);for(O=0;O<p.length;O+=1)g.delete(p[O]);P(t,z.prev,q.next),P(t,h,z),P(t,q,R),_=R,h=q,b-=1,k=[],p=[]}else g.delete(c),de(c,_,l),P(t,c.prev,c.next),P(t,c,h===null?t.first:h.next),P(t,h,c),h=c;continue}for(k=[],p=[];_!==null&&_.k!==E;)(_.e.f&fe)===0&&(g??=new Set).add(_),p.push(_),_=_.next;if(_===null)continue;c=_}k.push(c),h=c,_=c.next}if(_!==null||g!==void 0){for(var D=g===void 0?[]:Le(g);_!==null;)(_.e.f&fe)===0&&D.push(_),_=_.next;var F=D.length;if(F>0){var $=(s&pe)!==0&&f===0?l:null;if(u){for(b=0;b<F;b+=1)D[b].a?.measure();for(b=0;b<F;b+=1)D[b].a?.fix()}Ma(t,D,$)}}u&&la(()=>{if(x!==void 0)for(c of x)c.a?.apply()}),a.first=t.first&&t.first.e,a.last=h&&h.e;for(var ee of n.values())Re(ee.e);n.clear()}function De(a,e,t,n){(n&ue)!==0&&we(a.v,e),(n&se)!==0?we(a.i,t):a.i=t}function me(a,e,t,n,l,i,s,o,v,u,r){var f=(v&ue)!==0,m=(v&na)===0,I=f?m?ta(l,!1,!1):Ae(l):l,_=(v&se)===0?s:Ae(s),g={i:_,v:I,k:i,a:null,e:null,prev:t,next:n};try{if(a===null){var h=document.createDocumentFragment();h.append(a=Ne())}return g.e=be(()=>o(a,I,_,u),G),g.e.prev=t&&t.e,g.e.next=n&&n.e,t===null?r||(e.first=g):(t.next=g,t.e.next=g.e),n!==null&&(n.prev=g,n.e.prev=g.e),g}finally{}}function de(a,e,t){for(var n=a.next?a.next.e.nodes_start:t,l=e?e.e.nodes_start:t,i=a.e.nodes_start;i!==null&&i!==n;){var s=ua(i);l.before(i),i=s}}function P(a,e,t){e===null?a.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Pe(a,e,t=!1){if(a.multiple){if(e==null)return;if(!Oe(e))return da();for(var n of a.options)n.selected=e.includes(le(n));return}for(n of a.options){var l=le(n);if(_a(l,e)){n.selected=!0;return}}(!t||e!==void 0)&&(a.selectedIndex=-1)}function Ia(a){var e=new MutationObserver(()=>{Pe(a,a.__value)});e.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),fa(()=>{e.disconnect()})}function Na(a,e,t=e){var n=!0;qe(a,"change",l=>{var i=l?"[selected]":":checked",s;if(a.multiple)s=[].map.call(a.querySelectorAll(i),le);else{var o=a.querySelector(i)??a.querySelector("option:not([disabled])");s=o&&le(o)}t(s)}),ca(()=>{var l=e();if(Pe(a,l,n),n&&l===void 0){var i=a.querySelector(":checked");i!==null&&(l=le(i),t(l))}a.__value=l,n=!1}),Ia(a)}function le(a){return"__value"in a?a.__value:a.value}const pa=Symbol("is custom element"),La=Symbol("is html");function ge(a){if(G){var e=!1,t=()=>{if(!e){if(e=!0,a.hasAttribute("value")){var n=a.value;B(a,"value",null),a.value=n}if(a.hasAttribute("checked")){var l=a.checked;B(a,"checked",null),a.checked=l}}};a.__on_r=t,ha(t),He()}}function Oa(a,e){var t=xe(a);t.value===(t.value=e??void 0)||a.value===e&&(e!==0||a.nodeName!=="PROGRESS")||(a.value=e??"")}function Ca(a,e){var t=xe(a);t.checked!==(t.checked=e??void 0)&&(a.checked=e)}function B(a,e,t,n){var l=xe(a);G&&(l[e]=a.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&a.nodeName==="LINK")||l[e]!==(l[e]=t)&&(e==="loading"&&(a[ba]=t),t==null?a.removeAttribute(e):typeof t!="string"&&Ra(a).includes(e)?a[e]=t:a.setAttribute(e,t))}function xe(a){return a.__attributes??={[pa]:a.nodeName.includes("-"),[La]:a.namespaceURI===ma}}var Te=new Map;function Ra(a){var e=Te.get(a.nodeName);if(e)return e;Te.set(a.nodeName,e=[]);for(var t,n=a,l=Element.prototype;l!==n;){t=xa(n);for(var i in t)t[i].set&&e.push(i);n=ga(n)}return e}function Ge(a,e,t=e){var n=Ea(),l=new WeakSet;qe(a,"input",i=>{var s=i?a.defaultValue:a.value;if(s=_e(a)?he(s):s,t(s),J!==null&&l.add(J),n&&s!==(s=e())){var o=a.selectionStart,v=a.selectionEnd;a.value=s??"",v!==null&&(a.selectionStart=o,a.selectionEnd=Math.min(v,a.value.length))}}),(G&&a.defaultValue!==a.value||ya(e)==null&&a.value)&&(t(_e(a)?he(a.value):a.value),J!==null&&l.add(J)),Sa(()=>{var i=e();if(a===document.activeElement){var s=wa??J;if(l.has(s))return}_e(a)&&i===he(a.value)||a.type==="date"&&!i&&!a.value||i!==a.value&&(a.value=i??"")})}function _e(a){var e=a.type;return e==="number"||e==="range"}function he(a){return a===""?null:+a}var Ha=T("<label> </label>"),qa=(a,e,t)=>e.onchange(d(t)),Da=T('<div class="widget-slider"><!> <input type="range"/></div>');function Ve(a,e){K(e,!0);let t=C(e,"step",3,1),n=C(e,"label",3,""),l=C(e,"default",19,()=>e.min),i=ie(j(l()));var s=Da(),o=w(s);{var v=r=>{var f=Ha(),m=w(f,!0);S(f),N(()=>V(m,n())),y(r,f)};H(o,r=>{n()&&r(v)})}var u=Y(o,2);ge(u),u.__change=[qa,e,i],S(s),N(()=>{B(u,"min",e.min),B(u,"max",e.max),B(u,"step",t())}),Ge(u,()=>d(i),r=>X(i,r)),y(a,s),W()}Z(["change"]);var Pa=T("<label> </label>"),Ga=(a,e,t,n)=>{X(e,t,!0),n.onchange(t)},Va=T('<button type="button"> </button>'),Ua=T('<div class="widget-button-group"><!> <div role="group"></div></div>');function Ue(a,e){K(e,!0);let t=C(e,"label",3,""),n=ie(j(e.default??e.choices[0]));var l=Ua(),i=w(l);{var s=v=>{var u=Pa(),r=w(u,!0);S(u),N(()=>V(r,t())),y(v,u)};H(i,v=>{t()&&v(s)})}var o=Y(i,2);ve(o,20,()=>e.choices,v=>v,(v,u)=>{var r=Va();r.__click=[Ga,n,u,e];var f=w(r,!0);S(r),N(()=>{B(r,"aria-pressed",d(n)===u),V(f,u)}),y(v,r)}),S(o),S(l),N(()=>B(o,"aria-label",t())),y(a,l),W()}Z(["click"]);var Ba=T("<label> </label>"),Fa=(a,e,t)=>e.onchange(d(t)),Ya=T("<option> </option>"),Ka=T('<div class="selector"><!> <select></select></div>');function Be(a,e){K(e,!0);let t=C(e,"label",3,""),n=ie(j(e.default??e.choices[0]));var l=Ka(),i=w(l);{var s=v=>{var u=Ba(),r=w(u,!0);S(u),N(()=>V(r,t())),y(v,u)};H(i,v=>{t()&&v(s)})}var o=Y(i,2);o.__change=[Fa,e,n],ve(o,20,()=>e.choices,v=>v,(v,u)=>{var r=Ya(),f=w(r,!0);S(r);var m={};N(()=>{V(f,u),m!==(m=u)&&(r.value=(r.__value=u)??"")}),y(v,r)}),S(o),S(l),Na(o,()=>d(n),v=>X(n,v)),y(a,l),W()}Z(["change"]);var Wa=T('<div class="selector-multi-label"> </div>'),za=(a,e,t,n)=>{a.target.checked?X(e,[...d(e),t],!0):X(e,d(e).filter(i=>i!==t),!0),n.onchange(d(e))},Ja=T('<label class="checkbox-item"><input type="checkbox"/> <span> </span></label>'),Qa=T('<div class="selector-multi"><!> <div class="checkbox-group"></div></div>');function Fe(a,e){K(e,!0);let t=C(e,"label",3,""),n=ie(j(Array.isArray(e.default)?e.default:e.default?[e.default]:[]));var l=Qa(),i=w(l);{var s=v=>{var u=Wa(),r=w(u,!0);S(u),N(()=>V(r,t())),y(v,u)};H(i,v=>{t()&&v(s)})}var o=Y(i,2);ve(o,20,()=>e.choices,v=>v,(v,u)=>{var r=Ja(),f=w(r);ge(f),f.__change=[za,n,u,e];var m=Y(f,2),I=w(m,!0);S(m),S(r),N(_=>{Oa(f,u),Ca(f,_),V(I,u)},[()=>d(n).includes(u)]),y(v,r)}),S(o),S(l),y(a,l),W()}Z(["change"]);var Xa=T("<label> </label>"),Za=(a,e,t)=>e.onchange(d(t)),ja=T('<div class="widget-button"><!> <input type="text"/></div>');function Ye(a,e){K(e,!0);let t=C(e,"placeholder",3,""),n=C(e,"label",3,""),l=C(e,"default",3,""),i=ie(j(l()));var s=ja(),o=w(s);{var v=r=>{var f=Xa(),m=w(f,!0);S(f),N(()=>V(m,n())),y(r,f)};H(o,r=>{n()&&r(v)})}var u=Y(o,2);ge(u),u.__focusout=[Za,e,i],S(s),N(()=>B(u,"placeholder",t())),Ge(u,()=>d(i),r=>X(i,r)),y(a,s),W()}Z(["focusout"]);function $a(a,e,t){e.onchange({...t})}var et=T('<div class="widget-form"><!> <button type="button"> </button></div>');function at(a,e){K(e,!0);let t=C(e,"submitLabel",3,"Submit");const n=j({});function l(u,r){n[u]=r}var i=et(),s=w(i);ve(s,17,()=>e.fields,u=>u.id,(u,r)=>{var f=te(),m=re(f);{var I=g=>{{let h=ne(()=>d(r).choices??[]);Ue(g,Q(()=>d(r),{get choices(){return d(h)},onchange:x=>l(d(r).id,x)}))}},_=g=>{var h=te(),x=re(h);{var k=M=>{{let E=ne(()=>d(r).choices??[]);Be(M,Q(()=>d(r),{get choices(){return d(E)},onchange:c=>l(d(r).id,c)}))}},p=M=>{var E=te(),c=re(E);{var b=L=>{{let U=ne(()=>d(r).choices??[]);Fe(L,Q(()=>d(r),{get choices(){return d(U)},onchange:R=>l(d(r).id,R)}))}},A=L=>{var U=te(),R=re(U);{var O=q=>{{let D=ne(()=>d(r).min??0),F=ne(()=>d(r).max??100);Ve(q,Q(()=>d(r),{get min(){return d(D)},get max(){return d(F)},onchange:$=>l(d(r).id,$)}))}},z=q=>{var D=te(),F=re(D);{var $=ee=>{Ye(ee,Q(()=>d(r),{onchange:Ke=>l(d(r).id,Ke)}))};H(F,ee=>{d(r).type==="textInput"&&ee($)},!0)}y(q,D)};H(R,q=>{d(r).type==="slider"?q(O):q(z,!1)},!0)}y(L,U)};H(c,L=>{d(r).type==="selectMulti"?L(b):L(A,!1)},!0)}y(M,E)};H(x,M=>{d(r).type==="select"?M(k):M(p,!1)},!0)}y(g,h)};H(m,g=>{d(r).type==="buttonGroup"?g(I):g(_,!1)})}y(u,f)});var o=Y(s,2);o.__click=[$a,e,n];var v=w(o,!0);S(o),S(i),N(()=>V(v,t())),y(a,i),W()}Z(["click"]);const tt=Object.freeze(Object.defineProperty({__proto__:null,buttonGroup:Ue,form:at,select:Be,selectMulti:Fe,slider:Ve,textInput:Ye},Symbol.toStringTag,{value:"Module"}));var rt=T('<span style="color:red"> </span>'),nt=T('<div class="widget"><!></div>');function lt(a,e){K(e,!0);let t=C(e,"id",7),n=C(e,"content",7);const l=JSON.parse(atob(n())),i=tt[l.type];function s(f){e.$$host.dispatchEvent(new CustomEvent("widget-event",{detail:f,bubbles:!0,composed:!0}))}var o=nt(),v=w(o);{var u=f=>{i(f,Q(()=>l,{onchange:m=>s({id:t(),value:m})}))},r=f=>{var m=rt(),I=w(m);S(m),N(()=>V(I,`Unknown widget “${l.type??""}”`)),y(f,m)};H(v,f=>{i?f(u):f(r,!1)})}return S(o),y(a,o),W({get id(){return t()},set id(f){t(f),ke()},get content(){return n()},set content(f){n(f),ke()}})}customElements.define("markdown-ui-widget",Aa(lt,{id:{attribute:"id",reflect:!0,type:"String"},content:{attribute:"content",reflect:!0,type:"String"}},[],[],!1));export{ve as e,vt as i,B as s};
